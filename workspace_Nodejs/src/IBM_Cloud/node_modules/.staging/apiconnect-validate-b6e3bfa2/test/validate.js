'use strict';

var f = require('util').format;
var path = require('path');
var test = require('tap').test;
var validate = require('..');

test('validate', function(t) {
    t.test('should fail when file is empty', function() {
        var filePath = path.resolve(__dirname, 'fixtures', 'empty.yaml');
        return validate.validateFile(filePath).catch(function(err) {
            t.ok(err);
            var expected = f('The API file %s is invalid.', filePath);
            t.match(err.message, expected);
            t.end();
        });
    });
});
