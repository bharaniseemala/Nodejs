language: node_js
group: bluezone
node_js:
  - '4'
  - '6'
before_install:
  - 'sudo add-apt-repository ppa:ubuntu-toolchain-r/test -y'
  - 'sudo apt-get update -q'
  - 'sudo apt-get install g++-4.8 -y'
  - 'npm config set registry=${NPM_REGISTRY}'
#  - 'npm install -g codacy-coverage'
  - 'cat ~/.npmrc'

#script:
#  - 'if [[ ( $TRAVIS_NODE_VERSION == "4" && "$(date +%u)" =~ ^(1|4)$ ) || ( $TRAVIS_NODE_VERSION == "6" && "$(date +%u)" =~ ^(2|3|5|6|7)$ ) ]]; then npm test -- --cov --coverage-report=text; cat ./coverage/lcov.info | codacy-coverage --token ${CODACY_TOKEN} --endpoint ${CODACY_API}; else npm test; fi'
env:
  global:
    - CXX=g++-4.8